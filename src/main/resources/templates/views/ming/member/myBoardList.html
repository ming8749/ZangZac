
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
<meta http-equiv="X-UA-Compatible" content="ie=edge" /> 
<title>내가 쓴 게시글</title>
<link rel="shortcut icon" href="https://storage.googleapis.com/zangzac/image/common/icons8-camping-16.png">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
<link href="../css/ming/member/MyPage.css" rel="stylesheet">
<link href="../css/ming/member/MyBoardList.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<style>
	#searchMem{
		width: 30px;
		height: 30px;
		position: relative;
		border: 1px solid rgb(100, 100, 100);
		border-radius: 10px;
	}
	#searchMem img{
		width: 30px;
		height: 30px;
		position: relative;
	}
	#search1{
		position: relative;
		top: -30px;
	}
	.dropdown-item{
		position: relative;
		top:32px;
		left: -100px;
		width: 80px;
		height: 30px;
	}
	
	.hoverTr:hover{
		background-color: rgb(226, 226, 226);
		cursor: pointer;
	}
</style>
</head>
<body>
	<div class="logo">
		<a href="/"><img src="../image/ming/member/logo.png" alt="logo"></a>
	</div>
	<aside class="sidebar">
		<div class="user">
			<img th:src="${loginUser.memberProfilePath}" style="width: 80px; height:80px; border-radius: 50%"></img><br><br>
			<p style="font-weight: bold; font-size: 1.5em;" th:text="${loginUser.memberName}"></p><br><br>
		</div>
		<ul class="links">
			<li>
				<img src="../image/ming/member/프로필수정.png" style="width: 60px;"></img>
				<a href="myPage.me">정보 수정</a>
			</li>
			<li th:if="${session.loginUser.memberLoginType == 1}">
				<img src="../image/ming/member/icons8-비밀번호-50.png" style="width: 60px;"></img>
				<a href="updatePwd.me">비밀번호 수정</a>
			</li>
		<hr>
			<li>
				<img src="../image/ming/member/icons8-edit-64.png" style="width: 60px;"></img>
				<a href="myBoardList.me">내가 쓴 게시글</a>
			</li>
			<li>
				<img src="../image/ming/member/리뷰.png" style="width: 60px;"></img>
				<a href="review.me">리뷰</a>
			</li>
			<li>
				<img src="../image/ming/member/icons8-계산서-100.png" style="width: 60px;"></img>
				<a href="myOrderPageView.so">결제내역</a>
			</li>
		<hr>
			<li>
				<img src="../image/ming/member/icons8-쇼핑몰-50.png" style="width: 60px;"></img>
				<a href="productListView.so">쇼핑몰 이동</a>
			</li>
			<li>
				<img src="../image/ming/member/icons8-게시판-50.png" style="width: 60px;"></img>
				<a href="campBoard.su">커뮤니티 이동</a>
			</li>
			<li>
				<img src="../image/ming/member/logout.png" style="width: 60px;"></img>
				<a href="logout.me">로그아웃</a>
			</li>
			<li id="deleteMemberBtn">
				<img src="../image/ming/member/icons8-취소-100 (1).png" style="width: 60px;"></img>
				<a id="deleteMember" style="color: red;">회원탈퇴</a>
			</li>
		</ul>
	</aside>
		<div id="myModal" class="modal">
	       <!-- 모달 내용 -->
	       <div class="modal-content">
	           	<h4 id="modalContent"></h4>
	           	<span id="modalResult"></span>
	       </div>
    	</div>
	<!-------------------------------------------------------게시판 시작--------------------------------------------------------------------->
		<div id="orderListWrapped">
	      <h1>내가 쓴 게시글</h1><br>
	      <a class="cateBtn active" style="margin-right: 20px;" href="myBoardList.me">커뮤니티 게시판</a>
	      <a class="cateBtn" href="mySecondHandProductList.me">중고 게시판</a><br>
	      <div style="float:right;">
	         <form action="myBoardList.me" method="get">
		         <div class="nav-item dropdown" id="search1">
		         	<select name="searchType" class="dropdown-item">
		         		<option value="cbTitle" name="cbTitle" th:selected="${searchType eq 'cbTitle'}">제목</option>
		         		<option value="categoryName" name="categoryName" th:selected="${searchType eq 'categoryName'}">분류</option>
		         	</select>
		            <input type="text" name="keyword">
		            <button type="submit" id="searchMem"><img src="../image/ming/member/—Pngtree—magnifying glass icon_4419957.png"></button>
		         </div>
	         </form>
	      </div>
	      
	      
	      <table id="allMember">
	         <tr>
	            <th class="td1">글번호</th>
	            <th class="td2">분류</th>
	            <th class="td4">제목</th>
	            <th class="td3">작성자</th>
	            <th class="td5">조회수</th>
	            <th class="td6">추천</th>
	            <th class="td7">댓글수</th>
	            <th class="td8">작성날짜</th>
	         </tr>
	         
	         <tr th:each="cb:${cbList}" class="hoverTr">
		            <td class="td1">[[${cb.cbNo}]]</td>
		            <td class="td2">[[${cb.categoryName}]]</td>
		            <td class="td4">[[${cb.cbTitle}]]</td>
		            <td class="td3">[[${cb.memberName}]]</td>
		            <td class="td5">[[${cb.cbCount}]]</td>
		            <td class="td6">[[${cb.heartCount}]]</td>
		            <td class="td7">[[${cb.replyCount}]]</td>
		            <td class="td8" th:text="${#strings.substring(cb.cbModifyDate, 0, 10)}"></td>
	         </tr>
	         <th:block th:if="${cbList.isEmpty}">
                <div class="board-container" >
                   <div class="board-none-text">
                      <h1>아직 작성된 글이 없어요...</h1>
                   </div>
                </div>
                <div class="border-bottom-div"></div>
            </th:block>
	      </table>
	       <div class="board_bottom_area">
	         <div id="pagenation" th:with="loc=${loc}" th:if="${!cbList.isEmpty}">
	            <ul>
	               <!-- 이전 버튼 -->
	               <li th:if="${pi.currentPage > 10}">
	                  <a th:href="@{${loc}(page=${pi.currentPage-10}, searchType=${searchType}, keyword=${keyword})}">&lt; 이전</a>
	               </li>
	                   <!-- 페이지 번호 -->
	                   <li th:each="p : ${#numbers.sequence(pi.startPage, pi.endPage)}">
	                      <th:block th:if="${keyword == null}">
	                      <a th:href="@{${loc}(page=${p}, searchType=${searchType}, keyword=${keyword})}" th:id="${p == pi.currentPage} ? 'check_page'">
	                          [[${p}]] 
	                      </a>
	                   </th:block>
	                   <th:block th:if="${keyword != null}">
	                      <a th:href="@{${loc}(page=${p}, searchType=${searchType}, keyword=${keyword})}" th:id="${p == pi.currentPage} ? 'check_page'">
	                         [[${p}]]
	                     </a>
	                   </th:block>
	               </li>
	                   <!-- 다음 버튼 -->
	                   <li th:if="${pi.maxPage >= 10 && pi.maxPage - pi.currentPage > 10}">
	                      <a th:href="@{${loc}(page=${pi.currentPage+10}, searchType=${searchType}, keyword=${keyword})}">다음 &gt;</a>
	                   </li>
	                 </ul>
	        	 </div>

	   </div>
	   		</div>
	<!-------------------------------------------------------- 게시판 끝 -------------------------------------------------------------------->
	<script th:inline="javascript">
		
	window.onload =()=>{
		const tbody = document.querySelector("tbody");
		const tds = tbody.querySelectorAll('td');
		for(const td of tds){
			td.addEventListener('click',function(){
				const trTds = this.parentElement.querySelectorAll('td');
					const boardId = trTds[0].innerText;
					/*<![CDATA[*/
					location.href='selectBoard.su?cbNo=' + boardId + "&page=" +/*[[${pi.currentPage}]]*/1;
					/*]]>*/
			});
		}
	}
		let check_code=false;
		let check_num;
		let code="";
    	let checkE = false;
	 	document.getElementById('deleteMember').addEventListener('click', function(event) {
	 		event.preventDefault();
	 		const modal = document.getElementById('myModal');
            const modalContent = document.getElementById('modalContent');
            modalContent.textContent = '정말 탈퇴하시겠습니까? \n 탈퇴 후 계정 복구는 불가능합니다.';
            modalContent.appendChild(document.createElement('br'));
            modalContent.appendChild(document.createElement('br'));

            modal.style.display = 'block';
            
            const deleteButton = document.createElement('button');
            deleteButton.textContent = '네';
            deleteButton.className = 'homepage-btn';
            deleteButton.addEventListener('click', function() {
                window.location.href = 'deleteMember.me';
            });
            modalContent.appendChild(deleteButton);
            
            const homepageButton = document.createElement('button');
            homepageButton.textContent = '아니오';
            homepageButton.className = 'homepage-btn';
            homepageButton.addEventListener('click', function() {
                closeModal();
            });
            modalContent.appendChild(homepageButton);
            
	 	});
	 	
	 	function closeModal() {
	 	    const modal = document.getElementById('myModal');
	 	    modal.style.display = 'none';
	 	};
	 	
	 	
	</script>
	
	
</body>
</html>